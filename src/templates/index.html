<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RSS Feeds</title>
    <link href="https://unpkg.com/@primer/css@^20.2.4/dist/primer.css" rel="stylesheet" />
</head>
<body class="p-4">
    <!-- Single Box component for all content -->
    <div class="Box">
        <div class="Box-header">
            <h3>Feeds (<span id="count">0</span>)</h3>
        </div>
        <div id="feeds">
            <div class="Box-body text-center">
                <div class="Spinner"></div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $.get('/api/feeds')
            .done(feeds => {
                $('#count').text(feeds.length);
                $('#feeds').html(feeds.map(feed => `
                    <div class="Box-row">
                        <h4>${feed.ai_title || 'Untitled'}</h4>
                        <p>${feed.summary || 'No summary'}</p>
                    </div>
                `).join(''));
            })
            .fail(() => {
                $('#feeds').html('<div class="Box-body"><div class="flash flash-error">Error loading feeds</div></div>');
            });
    </script>
</body>
</html>
